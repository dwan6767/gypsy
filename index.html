<!DOCTYPE html>
<html>
<head>
  <title>ESP8266 Live Dashboard</title>
  <style>
    body { font-family: 'Segoe UI', Arial; background: #e8f0f8; margin: 0; padding: 0; }
    header { background: #2c3e50; color: white; padding: 20px; text-align: center; }
    main { padding: 40px; text-align: center; }
    #esp-content { border: 2px solid #2c3e50; background: white; padding: 20px; border-radius: 10px; display: inline-block; max-width: 600px; }
    h2 { color: #34495e; }
  </style>
</head>
<body>
  <header>
    <h1>ESP8266 Live Dashboard</h1>
  </header>
  <main>
    <div id="esp-content">
      <h2>Loading data...</h2>
    </div>
  </main>

  <script>
    async function updateESP() {
      try {
        const res = await fetch('/api/update');
        const data = await res.json();
        document.getElementById('esp-content').innerHTML = data.html;
      } catch (err) {
        document.getElementById('esp-content').innerHTML = "<h2>Error fetching data</h2>";
        console.error("Error fetching data", err);
      }
    }

    updateESP();
    setInterval(updateESP, 5000); // refresh every 5 seconds
  </script>
</body>
</html>
